
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>מערכת ניהול EduCatalog</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="../modules.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">

  <header class="bg-blue-900 text-white p-4 text-center text-2xl font-bold">
    מערכת ניהול פתרונות למידה
  </header>

  <main class="p-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
    <!-- כפתורי מודולים -->
    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('mentors')">
      <span>👨‍🏫 מנחים</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('guides')">
      <span>📘 מדריכים פדגוגיים</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('learning_types')">
      <span>💻 אופני למידה</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('days')">
      <span>📅 ימי מפגש</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('stages')">
      <span>🏫 שלבי חינוך</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('categories')">
      <span>📂 תחומי פתרונות למידה</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('subjects')">
      <span>📚 תחומי דעת</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('site_info')">
      <span>🌐 מידע כללי לאתר</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('credits')">
      <span>🕒 היקף שעות מוכר</span>
    </button>

    <button class="bg-white rounded-lg shadow p-4 flex items-center gap-3 hover:bg-blue-50"
            onclick="openModule('solutions')">
      <span>🧩 פתרונות למידה</span>
    </button>
  </main>

  <!-- אזור דינמי לכל מודול -->
  <section id="module-container" class="p-6">
    <div id="mentors"></div>
    <div id="guides"></div>
    <div id="learning_types"></div>
    <div id="days"></div>
    <div id="stages"></div>
    <div id="categories"></div>
    <div id="subjects"></div>
    <div id="site_info"></div>
    <div id="credits"></div>
    <div id="solutions"></div>
  </section>

  <script type="module">
    import {
      createMentorsForm, loadMentors, renderMentors, addMentor,
      createGuidesForm, loadGuides, renderGuides, addGuide,
      createLearningTypesForm, loadLearningTypes, renderLearningTypes, addLearningType,
      createDaysForm, loadDays, renderDays, addDay,
      createStagesForm, loadStages, renderStages, addStage,
      createCategoriesForm, loadCategories, renderCategories, addCategory,
      createSubjectsForm, loadSubjects, renderSubjects, addSubject,
      createSiteInfoForm, loadSiteInfo, renderSiteInfo, addSiteInfo,
      createCreditsForm, loadCredits, renderCredits, addCredit,
      createSolutionsForm, loadSolutions, renderSolutions, addSolution
    } from "../modules.js";

    const modules = {
      mentors: () => {
        createMentorsForm('mentors', addMentor);
        loadMentors(data => renderMentors('mentors', data));
      },
      guides: () => {
        createGuidesForm('guides', addGuide);
        loadGuides(data => renderGuides('guides', data));
      },
      learning_types: () => {
        createLearningTypesForm('learning_types', addLearningType);
        loadLearningTypes(data => renderLearningTypes('learning_types', data));
      },
      days: () => {
        createDaysForm('days', addDay);
        loadDays(data => renderDays('days', data));
      },
      stages: () => {
        createStagesForm('stages', addStage);
        loadStages(data => renderStages('stages', data));
      },
      categories: () => {
        createCategoriesForm('categories', addCategory);
        loadCategories(data => renderCategories('categories', data));
      },
      subjects: () => {
        createSubjectsForm('subjects', addSubject);
        loadSubjects(data => renderSubjects('subjects', data));
      },
      site_info: () => {
        createSiteInfoForm('site_info', addSiteInfo);
        loadSiteInfo(data => renderSiteInfo('site_info', data));
      },
      credits: () => {
        createCreditsForm('credits', addCredit);
        loadCredits(data => renderCredits('credits', data));
      },
      solutions: () => {
        createSolutionsForm('solutions', addSolution);
        loadSolutions(data => renderSolutions('solutions', data));
      },
    };

    window.openModule = function (id) {
      // הסתר את כל המודולים
      document.querySelectorAll('#module-container > div').forEach(div => div.innerHTML = '');
      // טען את המודול הרצוי
      modules[id]();
    }
  </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script>
  // פונקציה כללית ליבוא אקסל לכל מודול לפי שם שדה בסיסי
  function importExcelToModule(moduleId, addFunction) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.xlsx,.xls';
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = (evt) => {
        const data = new Uint8Array(evt.target.result);
        const workbook = XLSX.read(data, {type: 'array'});
        const sheet = workbook.Sheets[workbook.SheetNames[0]];
        const json = XLSX.utils.sheet_to_json(sheet);
        json.forEach(row => addFunction(row));
        alert('ייבוא הסתיים בהצלחה!');
      };
      reader.readAsArrayBuffer(file);
    };
    input.click();
  }
</script>

</body>
</html>
