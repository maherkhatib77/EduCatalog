<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>מערכת ניהול פתרונות למידה</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script type="module" src="/dashboard/modules.js"></script>
  <script type="module" src="/dashboard/firebase-config.js"></script>
</head>
<body class="bg-gray-100 p-4 font-sans">
  <h1 class="text-3xl font-bold mb-6 text-center">מערכת ניהול פתרונות למידה</h1>
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="admin-buttons">
    <button onclick="loadModule('solutions')" class="btn">פתרונות למידה</button>
    <button onclick="loadModule('mentors')" class="btn">מנחים</button>
    <button onclick="loadModule('guides')" class="btn">מדריכים</button>
    <button onclick="loadModule('subjects')" class="btn">תחומי דעת</button>
    <button onclick="loadModule('site_info')" class="btn">מידע כללי</button>
    <button onclick="loadModule('education_stages')" class="btn">שלבי חינוך</button>
    <button onclick="loadModule('learning_methods')" class="btn">אופני למידה</button>
    <button onclick="loadModule('meeting_days')" class="btn">ימי מפגש</button>
    <button onclick="loadModule('solution_categories')" class="btn">תחומי פתרונות למידה</button>
  </div>

  <div id="module-container" class="mt-8 bg-white p-4 rounded shadow"></div>
  <div id="table-container" class="mt-4"></div>

  <style>
    .btn {
      @apply bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded shadow flex items-center justify-center;
    }
  </style>

  <script type="module">
    import {
      createSolutionsForm, renderSolutions, loadSolutions, addSolution,
      createMentorsForm, renderMentors, loadMentors, addMentor,
      createGuidesForm, renderGuides, loadGuides, addGuide,
      createSubjectsForm, renderSubjects, loadSubjects, addSubject,
      createSiteInfoForm, renderSiteInfo, loadSiteInfo, addSiteInfo,
      createEducationStagesForm, renderEducationStages, loadEducationStages, addEducationStage,
      createLearningMethodsForm, renderLearningMethods, loadLearningMethods, addLearningMethod,
      createMeetingDaysForm, renderMeetingDays, loadMeetingDays, addMeetingDay,
      createSolutionCategoriesForm, renderSolutionCategories, loadSolutionCategories, addSolutionCategory
    } from './modules.js';

    const modules = {
      solutions: {
        form: createSolutionsForm,
        render: renderSolutions,
        load: loadSolutions,
        add: addSolution
      },
      mentors: {
        form: createMentorsForm,
        render: renderMentors,
        load: loadMentors,
        add: addMentor
      },
      guides: {
        form: createGuidesForm,
        render: renderGuides,
        load: loadGuides,
        add: addGuide
      },
      subjects: {
        form: createSubjectsForm,
        render: renderSubjects,
        load: loadSubjects,
        add: addSubject
      },
      site_info: {
        form: createSiteInfoForm,
        render: renderSiteInfo,
        load: loadSiteInfo,
        add: addSiteInfo
      },
      education_stages: {
        form: createEducationStagesForm,
        render: renderEducationStages,
        load: loadEducationStages,
        add: addEducationStage
      },
      learning_methods: {
        form: createLearningMethodsForm,
        render: renderLearningMethods,
        load: loadLearningMethods,
        add: addLearningMethod
      },
      meeting_days: {
        form: createMeetingDaysForm,
        render: renderMeetingDays,
        load: loadMeetingDays,
        add: addMeetingDay
      },
      solution_categories: {
        form: createSolutionCategoriesForm,
        render: renderSolutionCategories,
        load: loadSolutionCategories,
        add: addSolutionCategory
      }
    };

    window.loadModule = (key) => {
      const mod = modules[key];
      if (!mod) return;
      mod.form("module-container", mod.add);
      mod.load(data => mod.render("table-container", data));
    }
  </script>
</body>
</html>
